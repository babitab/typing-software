<!DOCTYPE html>
<html>
<head>
	<title> Informatic Assistant Exam</title>
	<link rel="stylesheet" type="text/css" href="app.css">
</head>
<body>	
	<h1 class="text-center text-blue m-0 bg-orange p-10">Typing Test Exam </h1>
	<div class="main-container">
		<div class="d-flex justify-content-between">
			<div class="profile-image p-10">
				<img src="./user-img.png">
				<div class="name">Sudhir Mitharwal</div>
			</div>
			<div class="text-center">
				<h2 class="bg-teal text-white m-0 p-10">Typing Test Exam</h2>
				<h1 class="text-red m-0" style="font-size: 40px; padding: 5px" id="timeDuration">00:15:00</h1>
                <label class="bg-teal text-white p-10">
                	Exam Time Left
                </label>

			</div>

			<div class="p-10">
				<table id="details" class="details">
					<thead>
						<tr>
							<th colspan = "2">Candidate Details </th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Roll no</td>
							<td> : 101</td>
						</tr>
						<tr> 
							<td>Name</td>
							<td> : Babita</td>
						</tr>
						<tr>
							<td>Date Of Birth</td>
							<td> : 09-12-1994</td>
						</tr>
						<tr>
							<td>Exam Date</td>
							<td> : 15-8-2018</td>
						</tr>
						<tr>
							<td>Exam Time</td>
							<td> : 11:00</td>
						</tr>
					</tbody>
					<thead>
						<tr>
							<th colspan = "2">Section Details </th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Hindi typing speed</td>
							<td>15 Minutes </td>
						</tr>
						<tr>
							<td>English typing speed</td>
							<td>15 minutes</td>
						</tr>
					</tbody>
				</table> 
				
			</div>
		</div>
		<section class="p-10">
			<label for="read_line">Read Line No</label>
			<input type="text" id="read_line" class="d-block w-100" value="babita mith." readonly  />
			<label for="type_line">Type Line No</label>
			<input type="text" id="type_line" class="d-block w-100"  />
			<div id="errormessage"></div>
		</section>
		<section>
			<button  class="btn js-togglePopup" data-target="popup2">Settings</button>&nbsp;&nbsp;
			<button class="btn js-togglePopup" data-target="popup1">Start Exam Now</button>
		</section>
	</div>
	<div class="address">
		<div class="bg-teal text-white p-10">
			Typing Exam Software
		</div>
		<div class="Name">
			Babita Burdak <br>Sikar 
		</div>
		<div class="Name">
			9384837438

		</div>
    </div>
    <div class="popup" id="popup1">
    	<div class="popup__backdrop js-backdrop"></div>
    	<div class="popup__content">
		    <form action="index.html" method="get" class="settings-form bg-white p-30 rounded">
		    	<button class="float-right rounded bg-white js-togglePopup" type="button" data-target="popup1">&times;</button>
		      	<section>
		   	   		<h2 class="m-0 mb-15">Typing Test Language</h2>
		   		    <label><input type="radio" required name="selectedLanguage" value="Hindi" checked> Hindi</label><br>
		   		    <label><input type="radio" required name="selectedLanguage" value="English"> English</label><br>
		   		    <label><input type="radio" required name="selectedLanguage" value="Both">Both Hindi and English</label><br>
		      	</section>
		      	<section>
		      		<h1>Exam  Duration</h1>
		      		<label>Hindi Typing <input type="number" required placeholder="15" value="15" name="hindiTypingDuration"></label>min<br>
		      		<label>English Typing <input type="number" required placeholder="15" value="15" name="englishTypingDuration"></label>min
		      	</section>
		      	<h1>Select Exercise</h1>
		      	<table border = "1">
		      		<tr>
		      		<th>Hindi</th>
		      		<th>English</th>
		           </tr>
		      		<tr>
		      			<td colspan="2"> <label><input required type="radio" value="This is something about the data" checked name="selectedExercise"> 1</label></td>
		      		</tr>
		      		<tr>
		      			<td colspan="2"> <label><input required type="radio" value="And dome data to be written" name="selectedExercise"> 2</label></td>
		      		</tr>
		      		<tr>
		      			<td colspan="2"> <label><input required type="radio" value="here is something for you to type3" name="selectedExercise"> 3</label></td>
		      		</tr>
		      	</table>
		      	<button type="submit" class="btn mu-10 js-togglePopup" data-target="popup1">Start Exam Now</button>
		    </form>
    	</div>
   </div>
  
   		<div class="popup" id="popup2">
    		<div class="popup__backdrop js-backdrop"></div>
    		<div class="popup__content">
    			
				<div class="p-10">
					<form action="./index.html" method="GET" class="settings-form bg-white p-30 rounded">
						<button class="float-right rounded bg-white js-togglePopup" type="button" data-target="popup2">&times;</button>
						<div class="d-flex justify-content-between">
							<label class="profile-change">
								<input type="file" name="profileImage" />
								<img src="./user-img.png">
							</label>
						</div>
						<section class="form-group">
							<label>Roll No.</label>
							<input type="number" name="rollNumber" placeholder="12734" required />
						</section>
						<section class="form-group">
							<label>Name</label>
							<input type="text" name="name" placeholder="First Last Name" required />
						</section>
						<section class="form-group">
							<label>Father's Name</label>
							<input type="text" name="fatherName" placeholder="First Last Name" />
						</section>
						<section class="form-group">
							<label>Date of Birth</label>
							<input type="date" name="dob" />
						</section>
					   	<section class="form-group">
					   		<label>Exam  Duration</label>
					   		<label class="d-block">Hindi Typing(min) <input type="number" required placeholder="15" name="hindiTypingDuration"></label>
					   		<label class="d-block">English Typing(min) <input type="number" required placeholder="15" name="englishTypingDuration"></label>
					   	</section>
						<section>
							<div class="form-group">
								<label>Typing Test Language</label>
								<div class="d-flex">
									<label>
										<input type="radio" name="language" value="Hindi" checked> Hindi
									</label>
									<label class="ml-5">
										<input type="radio" name="language" value="English"> English
									</label>
									<label class="ml-5">
										<input type="radio" name="language" value="Both">Both Hindi and English
									</label>
								</div>
							</div>
							<div class="form-group">
								<h4 class="ttl-heading">Disable Backspace Use</h4>
								<input type="checkbox" name="disableBackSpace" value="1"> Disable Backspace use<br>
							</div>
						</section>
						<button type="submit" class="btn mu-10 js-togglePopup" data-target="popup2">Settings</button>
					</form> 
				</div>
 			</div>
 		</div>
 	<script>
		function togglePopup (event) {
			// get the id of the popup
			var id = event.target.getAttribute("data-target");
			var popup = document.getElementById(id);
			popup.style.display = popup.style.display === "block" ? "none" : "block";
			document.body.style.overflow = document.body.style.overflow === "hidden" ? "auto" : "hidden";
		}
		function startTime (duration, cb) {
			duration = duration * 60;
			document.getElementById("timeDuration").innerText = "00:" + Math.floor(duration/60) + ":" + duration % 60
			var token = setInterval(function () {
				duration--;
				document.getElementById("timeDuration").innerText = "00:" + Math.floor(duration/60) + ":" + duration % 60
				if (duration === 0) {
					clearInterval(token);
					alert("You time is over.");
					if (cb) {
						cb();
					}
				}
			}, 1000)
		}
		// get the popup togglers: array of toggler
		var popupTogglers = document.getElementsByClassName("js-togglePopup");
		// attach event listener to popup toggle
		for (var i = popupTogglers.length - 1; i >= 0; i--) {
			var popupToggler = popupTogglers[i]
			popupToggler.addEventListener("click", togglePopup)
		}
		var  readline = document.getElementById("read_line"), typeline = document.getElementById("type_line");
		const queryParams = location.search.substring(1).split("&").map(function map(v) { return v.split("=") }).reduce(function reduce(retValue, arr) { retValue[decodeURIComponent(arr[0])] = decodeURIComponent(arr[1]); return retValue; }, {});
		if (queryParams.selectedExercise) {
			readline.value = queryParams.selectedExercise.replace(/\+/g, " ")
		}
		if (queryParams.selectedLanguage == "Hindi") {
			startTime(queryParams.hindiTypingDuration);
			
		}
		if (queryParams.selectedLanguage == "English") {
			startTime(queryParams.englishTypingDuration)
		}
		if (queryParams.selectedLanguage == "Both") {
			var interval = queryParams.englishTypingDuration || queryParams.hindiTypingDuration
			startTime(interval , function callBack () {
				startTime(interval);
			});
		}
		typeline.addEventListener("input",function inputchange(event){
			var message = document.getElementById("errormessage")
			if (readline.value == event.target.value) {
				message.innerText = "Text matched";
				message.setAttribute("class", "text-blue");
			} else if (!event.target.value || readline.value.indexOf(event.target.value) == 0) {
				// there is no error
				message.innerText = "";
				message.setAttribute("class", "");
			} else {
				// there is no error
				message.innerText = "Dont match"
				message.setAttribute("class", "text-red");
			}
			
		})


   </script>

</body>
</html>


